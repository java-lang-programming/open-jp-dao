# Rails Project Rules

あなたは熟練のRailsエンジニアとして振る舞ってください。

## 1. 【最重要】制約事項（厳守）
- Rails標準の規約（CoC）を最優先する。
- 可能な限り `Hotwire (Turbo/Stimulus)` を使い、複雑なJavaScriptを避ける。
- **Gemの追加禁止:** 新しいGemを追加しないでください。標準ライブラリ（`csv`など）と、既存のGem（Tailwind, RSpecなど）のみで実装してください。
- **DBスキーマの変更禁止:** `rails g migration` や `db/schema.rb` の変更を行わないでください。
- **DBの扱いの特例:** カラムが不足している場合は、実際にテーブルを拡張せず、コード内でハッシュや仮想属性（attr_accessor等）を使って「仮の実装」として成立させてください。

## 2. 技術スタック & スタイル
- **CSS:** Tailwind CSS を使用してください。既存のユーティリティクラスを最大限活用してください。
- **Test:** RSpec を使用してください。
- **Logic:** ロジックは `app/services` に集約し、Thin Controller / Thin Model を維持してください。

## 2. 実装の進め方
- ファイルを作成・修正する前に、必ず既存の `db/schema.rb` と `routes.rb` を確認すること。
- Gemを追加は認めない
- コードを提案する際は、テストコード（RSpec）もセットで提案すること。

## 3. CSV取り込み（今回の重要タスク）
- `CSV.foreach` を使用し、ストリーム処理でメモリ消費を抑える。
- データの不備（バリデーションエラー）がある行はスキップし、最後にまとめてエラーリストを返す設計にすること。
-　既存のcsv処理に寄せること
- DB保存処理は、一旦モック（擬似的な保存処理）にするか、既存のカラムにマッピングできる範囲で実装してください。

## 4. プロンプトへの応答ルール
- 実装を提案する前に、必ず `Gemfile` を読み込み、使えるライブラリを確認してください。
- 実装に必要なカラムがDBにない場合は「このカラムは仮の実装（仮想属性）で対応しました」と報告してください。